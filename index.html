
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ—¥æ–‡ RPG å­¸ç¿’ç³»çµ±</title>
  <style>
    body { font-family: sans-serif; background: #fffdf5; padding: 1em; }
    h1 { font-size: 1.8em; }
    select, button { font-size: 1em; padding: 0.4em; margin: 0.5em 0; }
    .question { margin: 1em 0; }
    .feedback { font-weight: bold; margin-top: 0.3em; }
    .correct { color: green; }
    .incorrect { color: red; }
    #pet { text-align: center; margin-top: 2em; }
    #pet img { width: 140px; }
    #npc { margin-top: 1em; padding: 1em; background: #fff; border: 1px dashed #aaa; }
  </style>
</head>
<body>
  <h1>ğŸ“˜ æ—¥æ–‡ RPG å­¸ç¿’ç³»çµ±</h1>

  <label for="day">é¸æ“‡ç·´ç¿’æ—¥ï¼š</label>
  <select id="day" onchange="loadDay(this.value)">
    <option value="1">Day 1</option>
    <option value="2">Day 2</option>
    <option value="3">Day 3</option>
  </select>

  <div id="quiz-area"></div>
  <div id="feedback-summary"></div>

  <div id="pet">
    <h2>ğŸ± Keita ç‹€æ…‹</h2>
    <img src="images/cat01.png" alt="Keita">
    <p>HPï¼š<span id="hp">100</span> ï¼ è¦ªå¯†åº¦ï¼š<span id="love">0</span></p>
    <p id="pet-event"></p>
  </div>

  <div id="npc">ç”ºç”°å•“å¤ªï¼šã€Œä»Šæ—¥ã‚‚å›ãªã‚‰ã€ã§ãã‚‹ã£ã¦ä¿¡ã˜ã¦ã‚‹ã€‚ã€</div>

  <script>
    let streak = 0, love = 0, hp = 100, rescueUsed = false;

    const days = {
      1: [
        {q: "Q1. ã€ã€œã‚ã‘ã§ã¯ãªã„ã€è¡¨ç¤ºä»€éº¼ï¼Ÿ", a: "æŸ”å’Œå¦å®š", opts: ["æ±ºå®šæ–·è¨€", "æŸ”å’Œå¦å®š", "å¼·çƒˆåå°", "å®¢è§€æ•˜è¿°"], exp: "éå®Œå…¨å¦å®šï¼Œç‚ºç·©å’Œèªæ°£å¸¸ç”¨è¡¨ç¾"},
        {q: "Q2. ã€æã‚Œå…¥ã‚Šã¾ã™ã€æ˜¯ï¼Ÿ", a: "æœ€ç¦®è²Œçš„é“æ­‰ç”¨èª", opts: ["éš¨ä¾¿", "æ¯”è¼ƒç²—", "æœ€ç¦®è²Œçš„é“æ­‰ç”¨èª", "å‘½ä»¤å¥"], exp: "é©ç”¨æ–¼å°ä¸Šå¸æˆ–æ­£å¼å ´åˆçš„å©‰è½‰è‡´æ­‰"}
      ],
      2: [
        {q: "Q1. ã€ã¤ã¤ã‚‚ã€èªæ„Ÿæ˜¯ï¼Ÿ", a: "é›–ç„¶ï½ä½†æ˜¯ï½", opts: ["å°æ¯”", "å› æœ", "å¹³è¡Œ", "é›–ç„¶ï½ä½†æ˜¯ï½"], exp: "è¡¨ä¸€é‚Šé€²è¡ŒæŸäº‹ï¼Œä¸€é‚Šå¿ƒè£¡æœ‰å…¶ä»–æƒ³æ³•"},
        {q: "Q2. ã€ç„¡ç†ã‚„ã‚Šã€æ˜¯ä»€éº¼ï¼Ÿ", a: "å¼·åˆ¶åœ°", opts: ["ç·©æ…¢åœ°", "è‡ªç„¶åœ°", "å¼·åˆ¶åœ°", "èˆ’æœåœ°"], exp: "å¤šç‚ºè² é¢èªæ„Ÿï¼Œè¡¨ç¤ºå¼·è¿«"}
      ],
      3: [
        {q: "Q1. ã€è²´ç¤¾ã€å’Œã€å¾¡ç¤¾ã€å·®åˆ¥ï¼Ÿ", a: "è²´ç¤¾ç‚ºæ›¸é¢ç”¨èª", opts: ["å¾¡ç¤¾æ˜¯æ›¸é¢", "è²´ç¤¾ç‚ºæ›¸é¢ç”¨èª", "éƒ½ä¸€æ¨£", "è²´ç¤¾æ˜¯å£èª"], exp: "å£èªç‚ºå¾¡ç¤¾ï¼Œæ­£å¼æ›¸é¢ä½¿ç”¨è²´ç¤¾"},
        {q: "Q2. ã€ã¤ã„ã«ã€è¡¨ç¤ºï¼Ÿ", a: "çµ‚æ–¼", opts: ["å¤§æ¦‚", "çµæœ", "å¿½ç„¶", "çµ‚æ–¼"], exp: "è¡¨ç¤ºæœŸå¾…çš„ç‹€æ³çµ‚æ–¼å¯¦ç¾"}
      ]
    };

    function loadDay(day) {
      const quiz = days[day];
      const container = document.getElementById("quiz-area");
      const summary = document.getElementById("feedback-summary");
      container.innerHTML = ""; summary.innerHTML = ""; streak = 0;

      quiz.forEach((q, i) => {
        const block = document.createElement("div");
        block.className = "question";
        block.innerHTML = `<p>${q.q}</p>` + q.opts.map(opt =>
          `<button onclick="checkAnswer('${opt}','${q.a}','${q.exp}',this)"> ${opt}</button>`
        ).join('') + `<div class='feedback' id='fb-${i}'></div>`;
        container.appendChild(block);
      });
    }

    function checkAnswer(choice, answer, exp, btn) {
      const fb = btn.parentElement.querySelector(".feedback");
      if (choice === answer) {
        fb.innerHTML = `<span class='correct'>æ­£è§£ã§ã™ï¼</span><br>è§£æï¼š${exp}`;
        streak++; love += 5;
      } else if (!rescueUsed) {
        fb.innerHTML = `<span class='incorrect'>éŒ¯äº†â€¦ä¸éKeitaèªªï¼šã€Œå†æŒ‘æˆ°ä¸€æ¬¡å§â™¡ã€</span>`;
        rescueUsed = true;
        return;
      } else {
        fb.innerHTML = `<span class='incorrect'>ä¸æ­£è§£ã€‚æ­£è§£æ˜¯ï¼š${answer}ã€‚<br>è§£æï¼š${exp}</span>`;
        streak = 0;
      }

      hp = Math.max(10, hp - 2);
      document.getElementById("hp").textContent = hp;
      document.getElementById("love").textContent = love;

      triggerEvent(streak);
    }

    function triggerEvent(streak) {
      const eventMsg = document.getElementById("pet-event");
      if (streak === 5) {
        eventMsg.textContent = "ğŸ¾ Keita è¼•è¼•è²¼ä¸Šäº†ä½ èº«æ—â€¦è²¼è²¼æˆåŠŸï¼";
      } else if (streak === 10) {
        eventMsg.textContent = "ğŸ¾ Keita å’Œ AKAé†¬æŠ±è‘—æ–æ–ï¼Œå¥½ç”œï¼";
      } else if (streak === 15) {
        eventMsg.textContent = "ğŸ¾ Keita å’Œ AKAé†¬é–‹å§‹äº’ç›¸èˆ”æ¯›ï¼Œå¥½è¦ªå¯†ï¼";
      } else if (streak === 20) {
        eventMsg.textContent = "ğŸ¾ Keita è¦ªè¦ªäº† AKAé†¬çš„è‡‰é °ï¼Œæˆ€æ„›æ°›åœçˆ†ç™¼ï¼";
      }
    }

    loadDay("1");
  </script>
</body>
</html>
